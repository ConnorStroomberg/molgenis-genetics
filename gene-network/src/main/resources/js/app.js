webpackJsonp([1],[,,,,,,,function(t,e,n){"use strict";var s=n(26),a=n.n(s),i=n(25),r=n(16);n.d(e,"b",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return d});var o,c="__GET_PATIENT__",l="__IMPORT_FILE__",u="__FETCH_PATIENT_TABLES__",d="__COMPUTE_SCORE__",p=(o={},a()(o,"__LOGIN__",function(t){var e=t.commit,s=t.state,a=s.session,o=a.username,c=a.password;n.i(i.a)(o,c).then(function(t){e(r.a,t.token)}).catch(function(t){e(r.b,{message:t.errors[0].message,type:"warning"})})}),a()(o,l,function(t,e){var s=t.commit,a=t.dispatch,o=t.state;s(r.c,null),n.i(i.b)("/plugin/importwizard/importFile","post",e,o.token).then(function(t){s(r.d,t),a("__FETCH_JOB__")}).catch(function(t){s(r.b,{message:"Failed to import file, cause: "+t,type:"danger"})})}),a()(o,"__FETCH_JOB__",function(t){var e=t.commit,s=t.dispatch,a=t.state,o=setInterval(function(){n.i(i.c)({apiUrl:a.jobHref},"",a.token).then(function(t){"FINISHED"===t.status?(clearInterval(o),e(r.b,{message:"Import succeeded "+t.importedEntities,type:"info"}),e(r.c,null),s(u)):"FAILED"===t.status?(clearInterval(o),e(r.b,{message:"Import failed. cause: "+t.message,type:"warning"}),e(r.c,null)):e(r.c,t)})},1e3)}),a()(o,u,function(t){var e=t.commit,s=t.state;n.i(i.c)(s.session.server,"/v2/sys_md_Package?q=id=="+s.diagnosticsPackageId+"&attrs=entityTypes",s.token).then(function(t){t.items&&t.items[0]&&e(r.e,t.items[0].entityTypes)}).catch(function(t){e(r.b,{message:t.errors[0].message,type:"warning"})})}),a()(o,c,function(t,e){var s=t.commit,a=t.state;n.i(i.c)(a.session.server,"/v2/"+e,a.token).then(function(t){s(r.f,t.items)}).catch(function(t){s(r.b,{message:t.errors[0].message,type:"warning"})})}),a()(o,d,function(t,e){var s=t.commit,a=t.state,o=a.matrixEntityId,c=a.variants.map(function(t){return t.Gene_Name}).toString(),l=e[0];n.i(i.c)(a.session.server,"/matrix/"+o+"/valueByNames?rows="+c+"&columns="+l.ontologyTermName,a.token).then(function(t){console.log(t)}).catch(function(t){s(r.b,{message:t.errors[0].message,type:"warning"})})}),o);e.e=p},,,,,,,,,function(t,e,n){"use strict";var s=n(26),a=n.n(s);n.d(e,"b",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return u}),n.d(e,"g",function(){return d}),n.d(e,"f",function(){return p}),n.d(e,"h",function(){return f});var i,r="__CREATE_ALERT__",o="__UPDATE_JOB__",c="__UPDATE_JOB_HREF__",l="__SET_TOKEN__",u="__SET_PATIENT_TABLES__",d="__SET_PHENOTYPE_FILTERS__",p="__SET_PATIENT__",f="__TOGGLE_ACTIVE_PHENOTYPE_FILTERS__";e.i=(i={},a()(i,r,function(t,e){t.showAlert=!0,t.alert=e}),a()(i,"__REMOVE_ALERT__",function(t){t.showAlert=!1,t.alert.message=null,t.alert.type=null}),a()(i,o,function(t,e){t.job=e}),a()(i,c,function(t,e){t.jobHref=e}),a()(i,l,function(t,e){t.token=e}),a()(i,u,function(t,e){t.patients=e}),a()(i,d,function(t,e){t.phenotypeFilters=e.slice()}),a()(i,f,function(t,e){var n=t.phenotypeFilters.find(function(t){return t.id===e});n.isActive=!n.isActive}),a()(i,p,function(t,e){t.variants=e}),i)},,,,,,,,,function(t,e,n){"use strict";function s(t,e){return v()(t,e).then(function(t){return t.json().then(function(e){return{json:e,response:t}})}).then(function(t){var e=t.json;return t.response.ok?e:f.a.reject(e)})}function a(t,e,n,a){var i={method:e,body:n};return a?(i.headers=d()({},i.headers,{"x-molgenis-token":a}),i.mode="cors"):i.credentials="same-origin",s(t,i)}function i(t,e,n,a){var i=t.apiUrl+e,r={method:n,headers:m};return a?r.headers=d()({},m,{"x-molgenis-token":a}):r.credentials="same-origin",s(i,r)}function r(t,e,n){return i(t,e,"get",n)}function o(t,e){return v()("/api/v1/login",{method:"post",headers:m,body:l()({username:t,password:e})}).then(function(t){return t.json()})}var c=n(58),l=n.n(c),u=n(62),d=n.n(u),p=n(61),f=n.n(p),_=n(104),v=n.n(_);e.b=a,e.c=r,e.a=o;var m={Accept:"application/json","Content-Type":"application/json"}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var s=n(15),a=n.n(s),i=n(118),r=n(110),o=n.n(r),c=n(109),l=n.n(c);a.a.use(i.a),e.a=new i.a({mode:"history",routes:[{path:"/",name:"upload",component:o.a},{path:"/view/:entityTypeId",name:"view",component:l.a}]})},function(t,e,n){"use strict";var s=n(15),a=n.n(s),i=n(121),r=n(51),o=n(16),c=n(50),l=n(7);a.a.use(i.a),e.a=new i.a.Store({state:r.a,mutations:o.i,actions:l.e,getters:c.a,strict:!0})},,,function(t,e){},function(t,e){},function(t,e,n){var s=n(6)(n(52),n(115),null,null);t.exports=s.exports},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(44),a=(n.n(s),n(15)),i=n.n(a),r=n(47),o=n.n(r),c=n(48),l=(n.n(c),n(42)),u=n(41),d=n(43),p=n(46),f=(n.n(p),n(45));n.n(f);n.i(c.sync)(l.a,u.a),i.a.use(d.a),new i.a({el:"#app",store:l.a,router:u.a,template:"<App />",components:{App:o.a}})},function(t,e,n){"use strict";var s={};e.a=s},function(t,e,n){"use strict";var s={session:{server:{apiUrl:"/api",version:"4.0.0"},username:"admin",password:"admin"},showAlert:!1,token:"",alert:{message:null,type:null},job:null,jobHref:null,diagnosticsPackageId:window.__INITIAL_STATE__.diagnosticsPackageId,patients:[],phenotypeFilters:[],variants:[],matrixEntityId:window.__INITIAL_STATE__.matrixEntityId};e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(107),a=n.n(s),i=n(7);e.default={name:"molgenis-app",computed:{entityTypeId:{get:function(){return this.$route.params.entityTypeId}},showAlert:{get:function(){return this.$store.state.showAlert}},patients:{get:function(){return this.$store.state.patients}}},components:{AlertContainer:a.a},created:function(){this.$store.dispatch(i.a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"alert-container",computed:{alert:{get:function(){return this.$store.state.alert}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(119),a=n.n(s),i=n(25),r=n(16),o=n(7);e.default={name:"hpo-select",data:function(){return{phenotypes:[]}},computed:{phenotypeFilters:{get:function(){return this.$store.state.phenotypeFilters}}},methods:{queryOntologies:function(t){var e=this;n.i(i.c)(this.$store.state.session.server,"/v2/sys_ont_OntologyTerm?q=ontology.ontologyName==hp;(ontologyTermName=q="+t+",ontologyTermSynonym.ontologyTermSynonym=q="+t+",ontologyTermIRI=q="+t+")").then(function(t){e.phenotypes=t.items.map(function(t){return t.isActive=!0,t})})},selectionChanged:function(t){console.log(t),this.$store.commit(r.g,t),this.$store.dispatch(o.c,t)},activationChanged:function(t){this.$store.commit(r.h,t)}},components:{vSelect:a.a}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),a=n(111),i=n.n(a),r=n(108),o=n.n(r);e.default={name:"phenotype-selection-container",components:{VariantTable:i.a,HpoSelect:o.a},computed:{variants:{get:function(){return this.$store.state.variants}}},created:function(){var t=this.$route.params.entityTypeId;this.$store.dispatch(s.b,t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(7);e.default={name:"upload-container",data:function(){return{entityTypeId:null,file:null}},methods:{format:function(t){return t=t.replace(/[-.*$&%^()#!@?]/g,"_"),t=t.replace(/^[0-9]/g,"_")},upload:function(){var t=new FormData;t.append("file",this.file),t.append("entityTypeId",this.entityTypeId),t.append("packageName",this.$store.state.diagnosticsPackageId),t.append("action","ADD"),t.append("notify",!1),this.$store.dispatch(s.d,t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"variant-table",props:["variants"],data:function(){return{fields:{"#CHROM":{label:"Chromosome"},POS:{label:"Position"},REF:{label:"Reference allele"},ALT:{label:"Alternative allele"},Gene_Name:{label:"Gene"},totalScore:{label:"Score"}},filter:null}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},,,,function(t,e,n){var s=n(6)(n(53),n(117),null,null);t.exports=s.exports},function(t,e,n){n(103);var s=n(6)(n(54),n(114),"data-v-226cdfac",null);t.exports=s.exports},function(t,e,n){var s=n(6)(n(55),n(116),null,null);t.exports=s.exports},function(t,e,n){n(102);var s=n(6)(n(56),n(113),null,null);t.exports=s.exports},function(t,e,n){var s=n(6)(n(57),n(112),null,null);t.exports=s.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-table",{attrs:{hover:"",items:t.variants,fields:t.fields}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form"},[n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col"},[n("label",{attrs:{for:"vcf-file-select"}},[t._v("Variant file")]),t._v(" "),n("b-form-file",{attrs:{id:"vcf-file-select","choose-label":"Select a VCF file"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),n("br"),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("Select a .vcf or .vcf.gz file from your hard drive")])],1)]),t._v(" "),n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col-md-6"},[n("label",{attrs:{for:"vcf-file-select"}},[t._v("Variant file identifier")]),t._v(" "),n("b-form-input",{attrs:{formatter:t.format},model:{value:t.entityTypeId,callback:function(e){t.entityTypeId=e},expression:"entityTypeId"}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("Should not start with a number")])],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-button",{staticClass:"btn btn-success",attrs:{disabled:!t.entityTypeId||null===t.file},on:{click:t.upload}},[t._v("Upload")])],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form phenotype-selection-container"},[n("h3",{attrs:{for:"selected-phenotype-list"}},[t._v("Phenotypes")]),t._v(" "),n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col"},[n("label",{attrs:{for:"hpo-select"}},[t._v("Add HPO")]),t._v(" "),n("v-select",{attrs:{id:"hpo-select","on-search":t.queryOntologies,options:t.phenotypes,onChange:t.selectionChanged,multiple:"",placeholder:"Search HPO Ontology...",label:"ontologyTermName"}})],1)]),t._v(" "),n("div",{staticClass:"row form-group"},[n("div",{staticClass:"col"},[n("ul",{attrs:{id:"selected-phenotype-list"}},[t._l(t.phenotypeFilters,function(e){return n("li",{staticClass:"row"},[n("div",{staticClass:"col"},[t._v("\n            "+t._s(e.ontologyTermName)+"\n          ")]),t._v(" "),n("b-form-checkbox",{staticClass:"col",attrs:{checked:e.isActive},on:{change:function(n){t.activationChanged(e.id)}}},[t._v("\n            active\n          ")])],1)}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:0===t.phenotypeFilters.length,expression:"phenotypeFilters.length === 0"}],staticClass:"row"},[n("em",{staticClass:"col"},[t._v("No phenotypes selected")])])],2)])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("b-card",{staticClass:"mb-2",attrs:{"show-header":""}},[n("h2",{staticClass:"text-muted",attrs:{align:"center"},slot:"header"},[t._v("Diagnostics platform")]),t._v("\n        Diagnostics platform created with MOLGENIS, used by UMCG Genetics department.\n        "),null!=t.entityTypeId?n("span",[t._v("Currently viewing patient "),n("strong",[t._v(t._s(t.entityTypeId))])]):t._e()])],1)]),t._v(" "),t.showAlert?n("alert-container"):t._e(),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("b-nav",{attrs:{vertical:""}},[n("b-nav-item",[n("router-link",{attrs:{to:"/"}},[n("b-button",{staticClass:"btn"},[t._v("Import patient data")])],1)],1)],1),t._v(" "),n("hr"),t._v(" "),n("b-nav",{attrs:{vertical:""}},[n("b-nav-item",[n("span",{staticClass:"text-muted"},[t._v("Patients")])]),t._v(" "),t._l(t.patients,function(e){return n("b-nav-item",[n("router-link",{attrs:{to:{name:"view",params:{entityTypeId:e.id}}}},[t._v(t._s(e.label))])],1)})],2)],1),t._v(" "),n("div",{staticClass:"col-md-9"},[n("router-view")],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("hpo-select"),t._v(" "),n("variant-table",{attrs:{variants:t.variants}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("b-alert",{attrs:{variant:t.alert.type,show:"",dismissible:""}},[t._v(t._s(t.alert.message))])],1)])},staticRenderFns:[]}},,,,,,function(t,e){}],[49]);